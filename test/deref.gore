var v1 i32 := -86
var v2 i32 := 420
var p1 *i32 := &v1

fn test_deref_global() {
    printStr("(*p1) v1 (-86)")
    printInt(*p1)

    printStr("(*p1) v1 = 86")
    v1 = 86
    printInt(*p1)

    printStr("*p1 = 2 * *p1 (2 * 86 = 172)")
              *p1 = 2 * *p1
    printInt(*p1)

    printStr("*p1 = *p1 / 2 (172 / 2 = 86)")
              *p1 = *p1 / 2
    printInt(*p1)

    printStr("*p1 = 2 * *p1 + 10 * 2 (2 * 86 + 10 * 2 = 192)")
              *p1 = 2 * *p1 + 10 * 2
    printInt(*p1)
}

fn test_deref_local() {
    var p2 *i32 := &v2

    printStr("(*p2) v2 (420)")
    printInt(*p2)

    printStr("(*p2) v2 = 86")
    v2 = 86
    printInt(*p2)

    printStr("*p2 = 2 * *p2 (2 * 86 = 172)")
              *p2 = 2 * *p2
    printInt(*p2)

    printStr("*p2 = *p2 / 2 (172 / 2 = 86)")
              *p2 = *p2 / 2
    printInt(*p2)

    printStr("*p2 = 2 * *p2 + 10 * 2 (2 * 86 + 10 * 2 = 192)")
              *p2 = 2 * *p2 + 10 * 2
    printInt(*p2)
}

fn main() {
    printStr("global pointer")
    test_deref_global()

    printStr("local pointer")
    test_deref_local()
}
